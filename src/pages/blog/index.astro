---
import { getCollection } from 'astro:content';
import PostListItem from 'src/components/blog/PostListItem.astro';
import Icon from 'src/components/common/Icon.astro';
import Footer from 'src/components/Footer.astro';
import Header from 'src/components/main/header/Header.astro';
import MainLayout from 'src/layouts/MainLayout.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<MainLayout light title="Blog">
  <div class="BACKGROUND_DYNAMIC_COLOR TEXT_DYNAMIC_COLOR min-h-screen">
    <Header alwaysShowLogo />
    <main>
      <div class="SECTION_BODY_RESPONSIVE px-5 lg:px-0 max-w-6xl">
        <div class="space-y-4">
          <h1 class="text-3xl font-display TEXT_SEMIBOLD">
            <Icon inline icon="fxemoji:memo" /> All Posts
          </h1>
          <p>
            <span class="italic text-neutral-300 inline-block">
              Dark mode coming soon!
            </span>
          </p>
          <div class="divide-y divide-neutral-300 dark:divide-stone-800">
            {posts.map((post) => <PostListItem {...post} />)}
          </div>
        </div>
      </div>
    </main>
    <Footer />
  </div>
</MainLayout>
